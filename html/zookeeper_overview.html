<!doctype html>
<html lang="en">

<head>
    <title>ZooKeeper概述</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Javascript -->
    <script type="text/javascript" src="../assets/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/vendor/bootstrap/js/bootstrap-paginator.js"></script>
    <script type="text/javascript" src="../assets/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="../assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="../assets/vendor/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="../assets/vendor/echarts/theme/macarons.js"></script>
    <script type="text/javascript" src="../assets/vendor/layer/layer.js"></script>
    <script type="text/javascript" src="../assets/vendor/laydate/laydate.js"></script>
    <script type="text/javascript" src="../assets/scripts/klorofil-common.js"></script>
    <script type="text/javascript" src="../assets/vendor/ui-choose/js/ui-choose.js"></script>
    <!-- VENDOR CSS -->
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/vendor/linearicons/style.css">
    <link rel="stylesheet" href="../assets/vendor/ui-choose/css/ui-choose.css">
    <!-- MAIN CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <!-- CUSTOMIZE CSS -->
    <link rel="stylesheet" href="../assets/css/roundButton.css">
    <!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
    <link rel="stylesheet" href="../assets/css/demo.css">
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
    <!-- ICONS -->
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../assets/img/favicon.png">
</head>

<body>
<!-- WRAPPER -->
<div id="wrapper">
    <!-- NAVBAR -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="brand">
            <a href="../index.html"><img src="../assets/img/logo-KevenPotter.png" alt="KevenPotter Logo" class="img-responsive logo"></a>
        </div>
        <div class="container-fluid">
            <div class="navbar-btn">
                <button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
            </div>
            <form class="navbar-form navbar-left">
                <div class="input-group">
                    <input type="text" value="" class="form-control" placeholder="搜索内容...">
                    <span class="input-group-btn"><button type="button" class="btn btn-primary">Go</button></span>
                </div>
            </form>
            <div id="navbar-menu">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
                            <i class="lnr lnr-alarm"></i>
                            <span class="badge bg-danger">5</span>
                        </a>
                        <ul class="dropdown-menu notifications">
                            <li><a href="#" class="notification-item"><span class="dot bg-warning"></span>System space is almost full</a></li>
                            <li><a href="#" class="notification-item"><span class="dot bg-danger"></span>You have 9 unfinished tasks</a></li>
                            <li><a href="#" class="notification-item"><span class="dot bg-success"></span>Monthly report is available</a></li>
                            <li><a href="#" class="notification-item"><span class="dot bg-warning"></span>Weekly meeting in 1 hour</a></li>
                            <li><a href="#" class="notification-item"><span class="dot bg-success"></span>Your request has been approved</a></li>
                            <li><a href="#" class="more">See all notifications</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="lnr lnr-question-circle"></i> <span>帮助</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">基本使用</a></li>
                            <li><a href="#">数据操作</a></li>
                            <li><a href="#">安全设置</a></li>
                            <li><a href="#">问题反馈</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="../assets/img/user.png" class="img-circle" alt="Avatar"><span>董鹏</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="#"><i class="lnr lnr-user"></i> <span>我的</span></a></li>
                            <li><a href="#"><i class="lnr lnr-envelope"></i> <span>消息</span></a></li>
                            <li><a href="#"><i class="lnr lnr-cog"></i> <span>设置</span></a></li>
                            <li><a href="#"><i class="lnr lnr-exit"></i> <span>退出</span></a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- END NAVBAR -->
    <!-- LEFT SIDEBAR -->
    <div id="sidebar-nav" class="sidebar">
        <div class="sidebar-scroll">
            <nav>
                <ul class="nav">
                    <li><a href="../index.html" class=""><i class="lnr lnr-home"></i> <span>首页</span></a></li>
                    <li><a href="students.html" class=""><i class="lnr lnr-users"></i> <span>学生信息</span></a></li>
                    <li><a href="teachers.html" class=""><i class="lnr lnr-graduation-hat"></i> <span>教师信息</span></a></li>
                    <li><a href="department_major.html" class="active"><i class="lnr lnr-inbox"></i> <span>系部专业</span></a></li>
                    <li><a href="elements.html" class=""><i class="lnr lnr-code"></i> <span>元素</span></a></li>
                    <li><a href="panels.html" class=""><i class="lnr lnr-cog"></i> <span>面板</span></a></li>
                    <li><a href="notifications.html" class=""><i class="lnr lnr-alarm"></i> <span>提示</span></a></li>
                    <li>
                        <a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-file-empty"></i> <span>单页</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
                        <div id="subPages" class="collapse ">
                            <ul class="nav">
                                <li><a href="../login.html" class="">登陆</a></li>
                                <li><a href="../page-lockscreen.html" class="">锁屏</a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="tables.html" class=""><i class="lnr lnr-dice"></i> <span>表格</span></a></li>
                    <li><a href="typography.html" class=""><i class="lnr lnr-text-format"></i> <span>版面设计</span></a></li>
                    <li><a href="icons.html" class=""><i class="lnr lnr-linearicons"></i> <span>图标</span></a></li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- END LEFT SIDEBAR -->
    <!-- MAIN -->
    <div class="main">
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="container-fluid">
                <h3 class="page-title">ZooKeeper概述</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">ZooKeeper是什么</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="whatIsZooKeeper" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">ZooKeeper保证的一致性特性</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="consistencyFeatureGuaranteedByZooKeeper" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">ZooKeeper的基本概念</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="basicConceptsOfZooKeeper" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">ZooKeeper的典型应用场景</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="typicalApplicationScenariosOfZooKeeper" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">ZooKeeper的设计目标</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="ZooKeeperDesignGoals" style="height:400%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">两阶段提交</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="twoPhaseCommit" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel">
                            <div class="panel-heading">
                                <h3 class="panel-title">三阶段提交</h3>
                                <div class="right">
                                    <button type="button" class="btn-toggle-collapse" title="向上折叠"><i class="lnr lnr-chevron-up"></i></button>
                                    <button type="button" class="btn-remove" title="关闭"><i class="lnr lnr-cross"></i></button>
                                </div>
                            </div>
                            <div class="panel-body no-padding">
                                <div id="threePhaseCommit" style="height:500%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MAIN CONTENT -->
    </div>
    <!-- END MAIN -->
    <div class="clearfix"></div>
    <footer>
        <div class="container-fluid">
            <p class="copyright">Copyright &copy; https://github.com/KevenPotter/student-web <a href="https://github.com/KevenPotter/student-web" target="_blank" title="KevenPotter">KevenPotter</a> - Collect from <a href="https://github.com/KevenPotter" title="Github" target="_blank">KevenPotter主页</a></p>
        </div>
    </footer>
</div>

<!-- ZooKeeper保证的一致性特性_顺序一致性 -->
<div id="consistencyFeatureGuaranteedByZooKeeper_sequentialConsistency" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">顺序一致性</h3>
    </div>
    <div class="panel-body">
        <p>从同一个客户端发起的事务请求，最终将会严格地按照其发起顺序被应用到ZooKeeper中去。</p>
    </div>
</div>

<!-- ZooKeeper保证的一致性特性_原子性 -->
<div id="consistencyFeatureGuaranteedByZooKeeper_atomicity" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">原子性</h3>
    </div>
    <div class="panel-body">
        <p>所有事务请求的处理结果在整个集群中所有机器上的应用情况是一致的，也就是说，要么整个集群所有机器都成功应用了某一个事务，要么都没有应用。一定不会出现集群中部分机器应用了该事物，而另外一部分没有应用的情况。</p>
    </div>
</div>

<!-- ZooKeeper保证的一致性特性_单一视图 -->
<div id="consistencyFeatureGuaranteedByZooKeeper_singleSystemImage" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">单一视图(Single System Image)</h3>
    </div>
    <div class="panel-body">
        <p>无论客户端连接的是哪个ZooKeeper服务器，其看到的服务端数据模型都是一致的。</p>
    </div>
</div>

<!-- ZooKeeper保证的一致性特性_可靠性 -->
<div id="consistencyFeatureGuaranteedByZooKeeper_reliability" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">可靠性</h3>
    </div>
    <div class="panel-body">
        <p>一旦服务端成功地应用了一个事务，并完成对客户端的响应，那么该事务所引起的服务端状态变更将会被一直保留下来，除非有另一个事务又对其进行了变更。</p>
    </div>
</div>

<!-- ZooKeeper保证的一致性特性_实时性 -->
<div id="consistencyFeatureGuaranteedByZooKeeper_realTime" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">实时性</h3>
    </div>
    <div class="panel-body">
        <p>通常人们看到实时性的第一反应是，一旦一个事务被成功应用，那么客户端能够立即从服务端上读取到这个事务变更后的最新数据状态。这里需要注意的是，ZooKeeper仅仅保证在一定的时间段内，客户端最终一定能够从服务端上读取到最新的数据状态。</p>
    </div>
</div>

<!-- ZooKeeper的基本概念_集群角色-->
<div id="basicConceptsOfZooKeeper_clusterRole" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">集群角色</h3>
    </div>
    <div class="panel-body">
        <p>通常在分布式系统中，构成一个集群的每一台机器都有自己的角色，最典型的集群模式就是Master/Slave模式（主备模式）。在这种模式中，我们把能够处理所有写操作的机器称为Master机器，把所有通过异步复制方式获取最新数据，并提供读服务的机器称为Slave机器。</p>
        <p>而在ZooKeeper中，这些概念被颠覆了。它没有沿用传统的Master/Slave概念，而是引入了Leader、Follower和Observer三种角色。ZooKeeper集群中的所有机器通过一个Leader选举过程来选定一台被称为“Leader”的机器，Leader服务器为客户端提供读和写服务。</p>
        <p>除Leader外，其他机器包括Follower和Observer。Follower和Observer都能够提供读服务，唯一的区别在于，Observer机器不参与Leader选举过程，也不参与写操作的“过半写成功”策略，因此Observer可以在不影响写性能的情况下提升集群的读性能。</p>
    </div>
</div>

<!-- ZooKeeper的基本概念_会话（Session）-->
<div id="basicConceptsOfZooKeeper_Session" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">会话（Session）</h3>
    </div>
    <div class="panel-body">
        <p>Session是指客户端会话，在讲解会话之前，我们首先来了解一下客户端连接。</p>
        <p>在ZooKeeper中，一个客户端连接是指客户端和服务器之间的一个TCP长连接。ZooKeeper对外的服务端口默认是2181，客户端启动的时候，首先会与服务器建立一个TCP连接，从第一次连接建立开始，客户端会话的生命周期也开始了，通过这个连接，客户端能够通过心跳检测与服务器保持有效的会话，也能够向ZooKeeper服务器发送请求并接受响应，同时还能够通过该连接接收来自服务器Watch事件通知。</p>
        <p>Session的sessionTimeout值用来设置一个客户端会话的超时时间。当由于服务器压力太大、网络故障或是客户端主动断开连接等各种原因导致客户端连接断开时，只要在sessionTimeout规定的时间内能够重新连接上集群中任意一台服务器，那么之前创建的会话仍然有效。</p>
        <p></p>
    </div>
</div>

<!-- ZooKeeper的基本概念_数据节点（Znode）-->
<div id="basicConceptsOfZooKeeper_znode" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">数据节点（Znode）</h3>
    </div>
    <div class="panel-body">
        <p>在谈到分布式的时候，我们通常说的“节点”是指组成集群的每一台机器。然而，在ZooKeeper中，“节点”分为两类，第一类同样是指构成集群的机器，我们称之为机器节点；第二类则是指数据模型中的数据单元，我们称之为数据节点——ZNode。ZooKeeper将所有数据存储在内存中，数据模型是一棵树（ZNodeTree），由斜杠（/）进行分割的路径，就是一个Znode，例如/foo/path1。每个ZNode上都会保存自己的数据内容，同时还会保存一系列属性信息。</p>
        <p>在ZooKeeper中，ZNode可以分为持久节点和临时节点两类。所谓持久节点是指一旦这个ZNode被创建了，除非主动进行ZNode的移除操作，否则这个ZNode将一直保存在ZooKeeper上。而临时节点就不一样了，它的生命周期和客户端会话绑定，一旦客户端会话失效，那么这个客户端创建的所有临时节点都会被移除。</p>
        <p>另外，ZooKeeper还允许用户为每个节点添加一个特殊的属性：SEQUENTIAL。一旦节点被标记上这个属性，那么在这个节点被创建的时候，ZooKeeper会自动在其节点名后面追加上一个整型数字，这个整型数字是一个由父节点维护的自增数字。</p>
    </div>
</div>

<!-- ZooKeeper的基本概念_版本-->
<div id="basicConceptsOfZooKeeper_version" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">版本</h3>
    </div>
    <div class="panel-body">
        <p>在前面我们已经提到，ZooKeeper的每个ZNode上都会存储数据，对应于每个ZNode，ZooKeeper都会为其维护一个叫作Stat的数据结构，Stat中记录了这个ZNode的三个数据版本，分别是version（当前ZNode的版本）、cversion（当前ZNode子节点的版本）和aversion（当前ZNode的ACL版本）。</p>
    </div>
</div>

<!-- ZooKeeper的基本概念_Watcher-->
<div id="basicConceptsOfZooKeeper_watcher" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">Watcher</h3>
    </div>
    <div class="panel-body">
        <p>Watcher（事件监听器），是ZooKeeper中的一个很重要的特性。ZooKeeper允许用户在指定节点上注册一些Watcher，并且在一些特定事件触发的时候，ZooKeeper服务端会将事件通知到感兴趣的客户端上去，该机制是ZooKeeper实现分布式协调服务的重要特性。</p>
    </div>
</div>

<!-- ZooKeeper的基本概念_ACL-->
<div id="basicConceptsOfZooKeeper_ACL" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">ACL</h3>
    </div>
    <div class="panel-body">
        <p>ZooKeeper采用ACL(Access Control Lists)策略来进行权限控制，类似于UNIX文件系统的权限控制。ZooKeeper定义了如下5种权限。</p>
        <ul>
            <li>CREATE：创建子节点的权限。</li>
            <li>READ：获取节点数据和子节点列表的权限。</li>
            <li>WRITE：更新节点数据的权限。</li>
            <li>DELETE：删除子节点的权限。</li>
            <li>ADMIN：设置节点ACL的权限。</li>
        </ul>
        <p>其中尤其需要注意的是，CREATE和DELETE这两种权限都是针对子节点的权限控制。</p>
    </div>
</div>

<!-- ZooKeeper的设计目标_简单的数据模型-->
<div id="ZooKeeperDesignGoals_simpleDataModel" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">简单的数据模型</h3>
    </div>
    <div class="panel-body">
        <p>ZooKeeper使得分布式程序能够通过一个共享的、树形结构的命名空间来进行相互协调。这里所说的树形结构的命名空间，是指ZooKeeper服务器内存中的一个数据模型，其由一系列被称为ZNode的数据节点组成。</p>
        <p>总的来说，其数据模型类似于一个文件系统，而ZNode之间的层级关系，就像文件系统的目录结构一样。</p>
        <p>不过和传统的磁盘文件系统不同的是，ZooKeeper将全量数据存储在内存中，以此来实现提高服务器吞吐、减少延迟的目的。</p>
    </div>
</div>

<!-- ZooKeeper的设计目标_可以构建集群-->
<div id="ZooKeeperDesignGoals_canBuildClusters" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">可以构建集群</h3>
    </div>
    <div class="panel-body">
        <p>一个ZooKeeper集群通常由一组机器组成，一般3~5台机器就可以组成一个可用的ZooKeeper集群了。</p>
        <p>组成ZooKeeper集群的每台机器都会在内存中维护当前的服务器状态，并且每台机器之间都互相保持着通信。值得一提的是，只要集群中存在超过一半的机器能够正常工作，那么整个集群就能够正常对外服务。</p>
        <p>ZooKeeper的客户端程序会选择和集群中任意一台机器共同来创建一个TCP连接，而一旦客户端和某台ZooKeeper服务器之间的连接断开后，客户端会自动连接到集群中的其他机器。</p>
    </div>
</div>

<!-- ZooKeeper的设计目标_顺序访问-->
<div id="ZooKeeperDesignGoals_sequentialAccess" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">顺序访问</h3>
    </div>
    <div class="panel-body">
        <p>对于来自客户端的每个更新请求，ZooKeeper都会分配一个全局唯一的递增编号，这个编号反映了所有事务操作的先后顺序，应用程序可以使用ZooKeeper的这个特性来实现更高层次的同步原语。</p>
    </div>
</div>

<!-- ZooKeeper的设计目标_高性能-->
<div id="ZooKeeperDesignGoals_highPerformance" class="panel" style="display: none">
    <div class="panel-heading">
        <h3 class="panel-title">高性能</h3>
    </div>
    <div class="panel-body">
        <p>由于ZooKeeper将全量数据存储在内存中，并直接服务于客户端的所有非事务请求，因此它尤其适用于以读操作为主的应用场景。</p>
    </div>
</div>

<!-- END WRAPPER -->
<!-- CUSTOM JAVASCRIPT -->
<script type="text/javascript" src="../assets/scripts/common-method.js"></script>
<script type="text/javascript" src="../assets/scripts/base.js"></script>
<script type="text/javascript" src="../assets/scripts/responseStatusCode.js"></script>
<script type="text/javascript" src="../assets/scripts/zookeeper_overview.js"></script>
</body>

</html>
